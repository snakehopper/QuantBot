package models

import (
	"encoding/json"
	"testing"
)

func TestKLineData_UnmarshalJSON(t *testing.T) {
	var res KLineReturn
	if err:=json.Unmarshal([]byte(testKlineData), &res);err!=nil{
		t.Fatal(err)
	}

	if len(res.Data) == 0 {
		t.Error("unmarshal error")
	}
}

const testKlineData = `
{"data":[[1545145200000,"3614.41","3622.51","3605.8","3621.38","0.104491",1545145499000,"0",9],[1545145500000,"3621.38","3623.4","3612.41","3612.73","0.106311",1545145799000,"0",10],[1545145800000,"3612.73","3618.34","3596.71","3596.71","0.170511",1545146099000,"0",19],[1545146100000,"3596.71","3601.24","3583.51","3584.74","0.116902",1545146399000,"0",15],[1545146400000,"3584.74","3595.07","3582.05","3592.01","0.08612",1545146699000,"0",9],[1545146700000,"3592.01","3592.01","3580.49","3591.99","0.130847",1545146999000,"0",13],[1545147000000,"3591.99","3595.57","3583.84","3595.57","0.097668",1545147299000,"0",13],[1545147300000,"3595.57","3595.57","3587.86","3588.77","0.113953",1545147599000,"0",11],[1545147600000,"3588.77","3593.05","3584.45","3584.51","0.057111",1545147899000,"0",6],[1545147900000,"3584.51","3589.83","3580.08","3580.99","0.151874",1545148199000,"0",12],[1545148200000,"3580.99","3587.11","3575.28","3584.39","0.12938",1545148499000,"0",11],[1545148500000,"3584.39","3584.39","3568.95","3577.93","0.098578",1545148799000,"0",10],[1545148800000,"3577.93","3577.93","3566.9","3575.28","0.128905",1545149099000,"0",10],[1545149100000,"3575.28","3576.91","3571.44","3576.31","0.095692",1545149399000,"0",10],[1545149400000,"3576.31","3583.41","3574.13","3583.4","0.100783",1545149699000,"0",9],[1545149700000,"3583.4","3587.47","3581.39","3587.47","0.092871",1545149999000,"0",9],[1545150000000,"3587.47","3587.47","3578.52","3580.01","0.301124",1545150299000,"0",23],[1545150300000,"3580.01","3589.45","3580.01","3588.11","0.241442",1545150599000,"0",22],[1545150600000,"3588.11","3589.45","3580.46","3589.45","0.071948",1545150899000,"0",9],[1545150900000,"3589.45","3589.45","3589.45","3589.45","0",1545151199000,"0",0],[1545151200000,"3589.45","3589.45","3575.81","3576.15","0.070473",1545151499000,"0",7],[1545151500000,"3576.15","3585.54","3574.42","3574.42","0.037715",1545151799000,"0",4],[1545151800000,"3574.42","3579","3563.49","3563.78","0.098563",1545152099000,"0",10],[1545152100000,"3563.78","3579","3563.26","3576.35","0.050885",1545152399000,"0",5],[1545152400000,"3576.35","3577.02","3562.84","3577.02","0.073621",1545152699000,"0",7],[1545152700000,"3577.02","3585.81","3568.5","3574.85","0.129882",1545152999000,"0",13],[1545153000000,"3574.85","3581.72","3567.05","3567.05","0.109665",1545153299000,"0",11],[1545153300000,"3567.05","3577.09","3559.22","3559.22","0.122565",1545153599000,"0",11],[1545153600000,"3559.22","3574.69","3558.01","3574.69","0.139629",1545153899000,"0",10],[1545153900000,"3574.69","3574.69","3556.14","3566.78","0.108959",1545154199000,"0",10],[1545154200000,"3566.78","3566.78","3547.03","3549.56","0.157392",1545154499000,"0",12],[1545154500000,"3549.56","3564.4","3549.56","3552.02","0.100738",1545154799000,"0",11],[1545154800000,"3552.02","3568.27","3552.02","3566.14","0.095807",1545155099000,"0",9],[1545155100000,"3566.14","3568.27","3554.34","3564.95","0.129063",1545155399000,"0",12],[1545155400000,"3564.95","3568.3","3554.8","3555.08","0.099252",1545155699000,"0",10],[1545155700000,"3555.08","3568.17","3553.85","3566.08","0.075913",1545155999000,"0",6],[1545156000000,"3566.08","3568.17","3556.14","3556.14","0.120268",1545156299000,"0",11],[1545156300000,"3556.14","3564.55","3552.21","3562.66","0.094483",1545156599000,"0",10],[1545156600000,"3562.66","3562.66","3543.85","3557.75","0.090819",1545156899000,"0",10],[1545156900000,"3557.75","3557.75","3542.24","3542.24","0.102938",1545157199000,"0",9],[1545157200000,"3542.24","3551.19","3534.54","3534.54","0.105509",1545157499000,"0",11],[1545157500000,"3534.54","3546.27","3529.17","3531.06","0.112198",1545157799000,"0",12],[1545157800000,"3531.06","3545.38","3526.15","3545.38","0.200834",1545158099000,"0",13],[1545158100000,"3545.38","3549.56","3539.43","3547.39","0.086818",1545158399000,"0",8],[1545158400000,"3547.39","3547.39","3533.39","3533.44","0.085799",1545158699000,"0",9],[1545158700000,"3533.44","3545.92","3529.81","3529.82","0.114299",1545158999000,"0",10],[1545159000000,"3529.82","3545.16","3529.5","3545.16","0.092537",1545159299000,"0",9],[1545159300000,"3545.16","3549.24","3531.33","3549.24","0.073752",1545159599000,"0",8],[1545159600000,"3549.24","3549.24","3535.52","3547.29","0.130119",1545159899000,"0",9],[1545159900000,"3547.29","3547.29","3534.65","3535.81","0.093824",1545160199000,"0",11],[1545160200000,"3535.81","3547.18","3531.41","3547.18","0.196576",1545160499000,"0",14],[1545160500000,"3547.18","3562.02","3547.18","3557.71","0.100156",1545160799000,"0",9],[1545160800000,"3557.71","3570.57","3557.71","3568.42","0.112894",1545161099000,"0",10],[1545161100000,"3568.42","3568.43","3555.86","3555.86","0.087776",1545161399000,"0",10],[1545161400000,"3555.86","3560.49","3549.07","3549.62","0.121252",1545161699000,"0",11],[1545161700000,"3549.62","3560.48","3549.62","3560.48","0.120993",1545161999000,"0",9],[1545162000000,"3560.48","3568.53","3559.7","3563.96","0.085356",1545162299000,"0",8],[1545162300000,"3563.96","3581.27","3563.96","3581.27","0.106042",1545162599000,"0",10],[1545162600000,"3581.27","3581.27","3572.04","3572.91","0.079784",1545162899000,"0",8],[1545162900000,"3572.91","3579.72","3570.09","3570.78","0.105244",1545163199000,"0",10],[1545163200000,"3570.78","3589.62","3568.88","3587.54","0.08993",1545163499000,"0",10],[1545163500000,"3587.54","3593.95","3587.54","3593.95","0.085515",1545163799000,"0",8],[1545163800000,"3593.95","3596.63","3587.46","3587.46","0.089264",1545164099000,"0",9],[1545164100000,"3587.46","3600.05","3587.46","3590.6","0.085888",1545164399000,"0",9],[1545164400000,"3590.6","3597.71","3581.07","3581.07","0.095474",1545164699000,"0",9],[1545164700000,"3581.07","3581.07","3574.21","3574.77","0.104859",1545164999000,"0",10],[1545165000000,"3574.77","3582.97","3573.01","3573.01","0.086462",1545165299000,"0",9],[1545165300000,"3573.01","3581.01","3567.55","3581.01","0.100933",1545165599000,"0",9],[1545165600000,"3581.01","3581.01","3560.4","3572.71","0.088539",1545165899000,"0",10],[1545165900000,"3572.71","3572.71","3556.1","3557.75","0.106288",1545166199000,"0",9],[1545166200000,"3557.75","3570.95","3557.75","3566.48","0.105981",1545166499000,"0",9],[1545166500000,"3566.48","3566.48","3550.69","3550.69","0.095528",1545166799000,"0",9],[1545166800000,"3550.69","3561.51","3550.69","3561.51","0.122765",1545167099000,"0",8],[1545167100000,"3561.51","3566.75","3555.65","3557.09","0.11147",1545167399000,"0",10],[1545167400000,"3557.09","3568.76","3554.73","3557.61","0.104785",1545167699000,"0",10],[1545167700000,"3557.61","3572.98","3557.61","3570.9","0.092908",1545167999000,"0",9],[1545168000000,"3570.9","3578.92","3562.98","3578.92","0.108566",1545168299000,"0",12],[1545168300000,"3578.92","3587.41","3578.92","3587.41","0.10735",1545168599000,"0",10],[1545168600000,"3587.41","3587.41","3571.1","3571.42","0.111615",1545168899000,"0",10],[1545168900000,"3571.42","3581.63","3569.48","3571.21","0.119689",1545169199000,"0",11],[1545169200000,"3571.21","3594.01","3571.21","3594.01","0.111535",1545169499000,"0",10],[1545169500000,"3594.01","3596.02","3584.17","3584.17","0.090337",1545169799000,"0",9],[1545169800000,"3584.17","3592.49","3577.4","3577.4","0.090829",1545170099000,"0",8],[1545170100000,"3577.4","3591.73","3577.4","3591.73","0.104368",1545170399000,"0",10],[1545170400000,"3591.73","3591.73","3579.03","3580.2","0.090277",1545170699000,"0",9],[1545170700000,"3580.2","3604.35","3580.2","3602.3","0.112356",1545170999000,"0",10],[1545171000000,"3602.3","3610.61","3602.3","3603.81","0.088893",1545171299000,"0",9],[1545171300000,"3603.81","3603.81","3584.62","3585.34","0.124198",1545171599000,"0",12],[1545171600000,"3585.34","3593.98","3581.08","3589.11","0.082708",1545171899000,"0",8],[1545171900000,"3589.11","3589.11","3575.16","3575.16","0.081688",1545172199000,"0",9],[1545172200000,"3575.16","3584.24","3569.94","3570.37","0.106165",1545172499000,"0",10],[1545172500000,"3570.37","3585.22","3569.43","3585.22","0.093176",1545172799000,"0",9],[1545172800000,"3585.22","3587.31","3574.54","3585.26","0.121945",1545173099000,"0",10],[1545173100000,"3585.26","3599.69","3578.56","3599.69","0.090478",1545173399000,"0",8],[1545173400000,"3599.69","3614.77","3589.21","3612.59","0.086942",1545173699000,"0",9],[1545173700000,"3612.59","3625.56","3612.59","3615.85","0.09653",1545173999000,"0",9],[1545174000000,"3615.85","3621.29","3609.37","3609.37","0.119056",1545174299000,"0",12],[1545174300000,"3609.37","3619.31","3604.55","3619.31","0.105681",1545174599000,"0",10],[1545174600000,"3619.31","3652.32","3619.31","3652.32","0.083446",1545174899000,"0",8],[1545174900000,"3652.32","3688.03","3652.32","3682.92","0.122192",1545175199000,"0",14]]}
`
